<!-- 數據分析 -->
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <title>MsVenus</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet" id="style">
    <link href="assets/css/pie-chart.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/fullPage.js/2.9.3/jquery.fullpage.min.css" />
    <script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/moonrisekingdom.js"></script>
    <script src="https://cdn.bootcss.com/fullPage.js/2.9.3/vendors/jquery.easings.min.js"></script>
    <script type="text/javascript" src="https://cdn.bootcss.com/fullPage.js/2.9.3/vendors/scrolloverflow.min.js"></script>
    <script type="text/javascript" src="https://cdn.bootcss.com/fullPage.js/2.9.3/jquery.fullpage.min.js"></script>
    <script type="text/javascript">
    $(window).load(function() {
        $('.search').hide();
        var search = "pie-chart.html";
        var link2 = document.referrer;
        console.log(link2);
        if ((link2.indexOf(search) == -1)) {
            document.cookie = 'href6=' + encodeURIComponent(link2);
            console.log(getCookieByName('href6'));
            $('.link-1').attr('href', getCookieByName('href6'));
        } else {
            $('.link-1').attr('href', getCookieByName('href6'));
        }
    });
       function parseCookie() {
        var cookieObj = {};
        var cookieAry = document.cookie.split(';');
        var cookie;
        for (var i = 0, l = cookieAry.length; i < l; ++i) {
            cookie = jQuery.trim(cookieAry[i]);
            cookie = cookie.split('=');
            cookieObj[cookie[0]] = cookie[1];
        }
        return cookieObj;
    }

    function getCookieByName(name) {
        var value = parseCookie()[name];
        if (value) {
            value = decodeURIComponent(value);
        }
        return value;
    }
    </script>
</head>

<body>
    <div class="background reveal-background"><img src="assets/img/image7.jpg" alt=""></div>
    <!-- main container -->
    <div class="main-container">
        <!-- 標頭 -->
        <header class="header">
            <div class="row no-gutters">
                <div class="col-auto">
                    <a class="link-1 btn btn-link">
                        <i class="material-icons">arrow_back</i>
                    </a>
                </div>
                <div class="col">
                    <div class="logo-header">
                        <span class="text-uppercase" style="line-height: 40px;">數據分析</span>
                    </div>
                </div>
                <div class="col-auto">
                    <a class="search btn btn-link search_icon">
                        <i class="fa fa-search"></i>
                    </a>
                </div>
            </div>
        </header>
        <script type="text/javascript">
        $(function() {
            $('.search-3').hide();
        });
        $('.fa-search').on('click', function() {
            $('.search-3').toggle();
        });
        </script>
        <div class="content">
            <div>
                <ul class="nav nav-pills nav-justified">
                    <li class="nav-item">
                        <a class="0 nav-link active" data-toggle="tab" href="0">產品比例</a>
                    </li>
                    <li class="nav-item">
                        <a class="1 nav-link" data-toggle="tab" href="1">使用速度分析</a>
                    </li>
                </ul>
            </div>
            <div>
                <div id="full-page">
                    <div class="section">
                        <div id="chartdiv1">
                            <input type="date" class="date1">至
                            <input type="date" class="date2">
                            <div id="chartdiv"></div>
                        </div>
                        <div class="slide" name="0">
                            <div id="legend"></div>
                            <div style="visibility: hidden;">
                                sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                                sssssssssssssssssssssssssssssssssssssssssssss
                            </div>
                        </div>
                        <div id="">
                        </div>
                        <div class="slide" name="1">
                    <form class="row search-3 form-inline m-2">
                        <input class="form-control pt-0 pb-0" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-info pl-0 pr-0" type="submit">Search</button>
                    </form>
                            <div id="legend1">
                                <button class="legend-item1 collapse-btn btn" type="button" data-toggle="collapse" data-target="#menu1" aria-expanded="false">
                                    <div class="legend-marker1" style="background:lightgray;">
                                        <img src="assets/img/search-1.png">
                                    </div>
                                    <span class="title-cate1">保養類</span>
                                    <i class="fa fa-angle-down fa-lg menu__icon--open"></i>
                                    <i class="fa fa-angle-up fa-lg menu__icon--close"></i>
                                </button>
                                <div class="collapse" id="menu1">

                                </div>
                                <hr>
                                <button class="legend-item1 collapse-btn btn" type="button" data-toggle="collapse" data-target="#menu2" aria-expanded="false">
                                    <div class="legend-marker1" style="background:lightgray;">
                                        <img src="assets/img/search-2.png">
                                    </div>
                                    <span class="title-cate1">臉部</span>
                                    <i class="fa fa-angle-down fa-lg menu__icon--open"></i>
                                    <i class="fa fa-angle-up fa-lg menu__icon--close"></i>
                                </button>
                                <div class="collapse" id="menu2">
                                    dddddd
                                </div>

                                <hr>
                                <button class="legend-item1 collapse-btn btn" type="button" data-toggle="collapse" data-target="#menu3" aria-expanded="false">
                                    <div class="legend-marker1" style="background:lightgray;">
                                        <img src="assets/img/search-3.png">
                                    </div>
                                    <span class="title-cate1">眼部</span>
                                    <i class="fa fa-angle-down fa-lg menu__icon--open"></i>
                                    <i class="fa fa-angle-up fa-lg menu__icon--close"></i>
                                </button>
                                <div class="collapse" id="menu3">
                                    dddddd
                                </div>

                                <hr>
                                <button class="legend-item1 collapse-btn btn" type="button" data-toggle="collapse" data-target="#menu4" aria-expanded="false">
                                    <div class="legend-marker1" style="background:lightgray;">
                                        <img src="assets/img/search-4.png">
                                    </div>
                                    <span class="title-cate1">眉毛</span>
                                    <i class="fa fa-angle-down fa-lg menu__icon--open"></i>
                                    <i class="fa fa-angle-up fa-lg menu__icon--close"></i>
                                </button>
                                <div class="collapse" id="menu4">
                                    dddddd
                                </div>

                                <hr>
                                <button class="legend-item1 collapse-btn btn" type="button" data-toggle="collapse" data-target="#menu5" aria-expanded="false">
                                    <div class="legend-marker1" style="background:lightgray;">
                                        <img src="assets/img/search-5.png">
                                    </div>
                                    <span class="title-cate1">嘴部</span>
                                    <i class="fa fa-angle-down fa-lg menu__icon--open"></i>
                                    <i class="fa fa-angle-up fa-lg menu__icon--close"></i>
                                </button>
                                <div class="collapse" id="menu5">
                                    dddddd
                                </div>

                                <hr>
                                <button class="legend-item1 collapse-btn btn" type="button" data-toggle="collapse" data-target="#menu6" aria-expanded="false">
                                    <div class="legend-marker1" style="background:lightgray;">
                                        <img src="assets/img/search-6.png">
                                    </div>
                                    <span class="title-cate1">用具</span>
                                    <i class="fa fa-angle-down fa-lg menu__icon--open"></i>
                                    <i class="fa fa-angle-up fa-lg menu__icon--close"></i>
                                </button>
                                <div class="collapse" id="menu6">
                                    dddddd
                                </div>

                                <hr>
                                <button class="legend-item1 collapse-btn btn" type="button" data-toggle="collapse" data-target="#menu7" aria-expanded="false">
                                    <div class="legend-marker1" style="background:lightgray;">
                                        <img src="assets/img/search-7.png">
                                    </div>
                                    <span class="title-cate1">香氛</span>
                                    <i class="fa fa-angle-down fa-lg menu__icon--open"></i>
                                    <i class="fa fa-angle-up fa-lg menu__icon--close"></i>
                                </button>
                                <div class="collapse" id="menu7">
                                    dddddd
                                </div>

                                <hr>
                                <button class="legend-item1 collapse-btn btn" type="button" data-toggle="collapse" data-target="#menu8" aria-expanded="false">
                                    <div class="legend-marker1" style="background:lightgray;">
                                        <img src="assets/img/search-8.png">
                                    </div>
                                    <span class="title-cate1">指甲</span>
                                    <i class="fa fa-angle-down fa-lg menu__icon--open"></i>
                                    <i class="fa fa-angle-up fa-lg menu__icon--close"></i>
                                </button>
                                <div class="collapse" id="menu8">
                                    dddddd
                                </div>
                            <div style="visibility: hidden;">s
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
                <script type="text/javascript">
                // var chart1 = am4core.create("chartdiv-1", am4charts.XYChart);
                // chart1.data = [{
                //     "country": "Lithuania",
                //     "litres": 501.9,
                //     "units": 250
                // }, {
                //     "country": "Czech Republic",
                //     "litres": 301.9,
                //     "units": 222
                // }, {
                //     "country": "Ireland",
                //     "litres": 201.1,
                //     "units": 170
                // }, {
                //     "country": "Germany",
                //     "litres": 165.8,
                //     "units": 122
                // }, {
                //     "country": "Australia",
                //     "litres": 139.9,
                //     "units": 99
                // }, {
                //     "country": "Austria",
                //     "litres": 128.3,
                //     "units": 85
                // }, {
                //     "country": "UK",
                //     "litres": 99,
                //     "units": 93
                // }, {
                //     "country": "Belgium",
                //     "litres": 60,
                //     "units": 50
                // }, {
                //     "country": "The Netherlands",
                //     "litres": 50,
                //     "units": 42
                // }];
                // let categoryAxis = chart1.xAxes.push(new am4charts.CategoryAxis());
                // categoryAxis.dataFields.category = "country";
                // categoryAxis.title.text = "Countries";

                // let valueAxis = chart1.yAxes.push(new am4charts.ValueAxis());
                // valueAxis.title.text = "Litres sold (M)";
                // var series = chart1.series.push(new am4charts.ColumnSeries());
                // series.dataFields.valueY = "litres";
                // series.dataFields.categoryX = "country";
                // series.name = "Sales";
                // series.columns.template.tooltipText = "Series: {name}\nCategory: {categoryX}\nValue: {valueY}";
                // series.columns.template.fill = am4core.color("#104547");
                am4core.useTheme(am4themes_moonrisekingdom);
                var chart = am4core.create("chartdiv", am4charts.PieChart);
                chart.data = [{
                    "country": "保養類",
                    "litres": 16,
                    "price":100

                }, {
                    "country": "臉部",
                    "litres": 50,
                    "price":100
                }, {
                    "country": "眼部",
                    "litres": 13,
                    "price":100
                }, {
                    "country": "眉毛",
                    "litres": 9,
                    "price":10032
                }, {
                    "country": "嘴部",
                    "litres": 12,
                    "price":100
                }, {
                    "country": "用具",
                    "litres": 2,
                    "price":100
                }, {
                    "country": "香氛",
                    "litres": 6,
                    "price":100
                }, {
                    "country": "指甲",
                    "litres": 1,
                    "price":100
                }];
                var pieSeries = chart.series.push(new am4charts.PieSeries());
                pieSeries.dataFields.value = "litres";
                pieSeries.dataFields.units = "price";
                pieSeries.dataFields.category = "country";

                pieSeries.labels.template.disabled = true;
                chart.radius = am4core.percent(95);
                chart.events.on("ready", function(event) {
                    chart.customLegend = document.getElementById('legend');
                    pieSeries.dataItems.each(function(row, i) {
                        var color = chart.colors.getIndex(i);
                        var percent = Math.round(row.values.value.percent * 100) / 100;
                        var value = row.value;
                        var price=row.units;
                        legend.innerHTML += '<div class="legend-item" id="legend-item-' + i + '" onmouseover="hoverSlice(' + i + ');" onmouseout="blurSlice(' + i + ');" style="color:' + color + ';"><div class="legend-marker" style="background: ' + color + ';"><img src="assets/img/search-' + (i + 1) + '.png"></div><span class="title-cate">' + row.category + '</span><span class="title-count">此區間共購入' +value + '件</span><span class="legend-value">' + percent + '%</span><span class="total"><i class="material-icons">monetization_on</i>'+price+'</span></div>';
                    });
                });

                function hoverSlice(item) {
                    var slice = pieSeries.slices.getIndex(item);
                    slice.isHover = true;
                }

                function blurSlice(item) {
                    var slice = pieSeries.slices.getIndex(item);
                    slice.isHover = false;
                }
                pieSeries.slices.template.stroke = am4core.color("#fff");
                pieSeries.slices.template.strokeWidth = 1;
                var hoverState = pieSeries.slices.template.states.getKey("hover");
                var shadow = pieSeries.slices.template.filters.push(new am4core.DropShadowFilter);
                shadow.opacity = 0;
                var hoverShadow = hoverState.filters.push(new am4core.DropShadowFilter);
                hoverShadow.opacity = 0.7;
                hoverShadow.blur = 5;
                $('g[role="tooltip"]').siblings().eq(2).css('visibility', 'hidden');
                $('#full-page').fullpage({
                    scrollingSpeed: 300,
                    loopHorizontal: false,
                    anchors: ['first'],
                    scrollOverflow: true,
                    controlArrows: false,
                    paddingBottom: '100px',
                    afterSlideLoad: function(anchorLink, index, slideAnchor, slideIndex) {
                        switch (slideIndex) {
                            case 0:
                                $('#chartdiv1').show();
                                $('.search').hide();
                                $('.0').click();
                                break;
                            case 1:
                                $('#chartdiv1').hide();
                                $('.search').show();
                                $('.1').click();
                                break;
                        }
                    }
                });
                $('ul li a[data-toggle]').on('click', function() {
                    var that = $(this);
                    link = that.attr('href');
                    $(location).attr('href', "#first/" + link);
                });
                </script>
            </div>
        </div>
    </div>
    <script src="assets/js/jquery-3.3.1.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/vendor/bootstrap-4.4.1/js/bootstrap.min.js"></script>
    <script src="assets/vendor/swiper/js/swiper.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/vendor/cookie/jquery.cookie.js"></script>
    <script src="assets/js/app.js"></script>
</body>

</html>